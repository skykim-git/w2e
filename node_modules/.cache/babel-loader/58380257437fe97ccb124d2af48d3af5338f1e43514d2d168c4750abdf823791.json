{"ast":null,"code":"var _jsxFileName = \"/Users/friday/Documents/w2e/frontend/src/components/FisheyeImage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FisheyeImage = ({\n  svgContent,\n  width,\n  height,\n  fisheyeSize\n}) => {\n  _s();\n  const canvasRef = useRef(null);\n  const containerRef = useRef(null);\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n\n    // Create an image from the SVG content\n    const img = new Image();\n    const svgBlob = new Blob([svgContent], {\n      type: 'image/svg+xml;charset=utf-8'\n    });\n    const url = URL.createObjectURL(svgBlob);\n    img.onload = function () {\n      // Draw the original image\n      ctx.drawImage(img, 0, 0, fisheyeSize, fisheyeSize);\n\n      // Get image data\n      const imageData = ctx.getImageData(0, 0, fisheyeSize, fisheyeSize);\n      const pixels = imageData.data;\n      const pixelsCopy = [];\n\n      // Copy pixels\n      for (let i = 0; i < pixels.length; i += 4) {\n        pixelsCopy.push([pixels[i], pixels[i + 1], pixels[i + 2], pixels[i + 3]]);\n      }\n\n      // Apply fisheye effect\n      const result = fisheye(pixelsCopy, fisheyeSize, fisheyeSize);\n\n      // Update image data\n      for (let i = 0; i < result.length; i++) {\n        const index = i * 4;\n        if (result[i] !== undefined) {\n          pixels[index] = result[i][0];\n          pixels[index + 1] = result[i][1];\n          pixels[index + 2] = result[i][2];\n          pixels[index + 3] = result[i][3];\n        }\n      }\n\n      // Put the modified image data back to the canvas\n      ctx.putImageData(imageData, 0, 0);\n\n      // Scale up the canvas to match the original SVG size\n      const container = containerRef.current;\n      container.style.width = `${width}px`;\n      container.style.height = `${height}px`;\n      container.style.display = 'flex';\n      container.style.justifyContent = 'center';\n      container.style.alignItems = 'center';\n      canvas.style.width = `${fisheyeSize}px`;\n      canvas.style.height = `${fisheyeSize}px`;\n    };\n    img.src = url;\n    return () => URL.revokeObjectURL(url);\n  }, [svgContent, width, height, fisheyeSize]);\n  function fisheye(srcpixels, w, h) {\n    // ... (keep the existing fisheye function)\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: containerRef,\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      width: fisheyeSize,\n      height: fisheyeSize\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n_s(FisheyeImage, \"+xMqLuoGzbrZrbRmx5ZxmPZsVhQ=\");\n_c = FisheyeImage;\nexport default FisheyeImage;\nvar _c;\n$RefreshReg$(_c, \"FisheyeImage\");","map":{"version":3,"names":["React","useEffect","useRef","jsxDEV","_jsxDEV","FisheyeImage","svgContent","width","height","fisheyeSize","_s","canvasRef","containerRef","canvas","current","ctx","getContext","img","Image","svgBlob","Blob","type","url","URL","createObjectURL","onload","drawImage","imageData","getImageData","pixels","data","pixelsCopy","i","length","push","result","fisheye","index","undefined","putImageData","container","style","display","justifyContent","alignItems","src","revokeObjectURL","srcpixels","w","h","ref","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/friday/Documents/w2e/frontend/src/components/FisheyeImage.jsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\n\nconst FisheyeImage = ({ svgContent, width, height, fisheyeSize }) => {\n  const canvasRef = useRef(null);\n  const containerRef = useRef(null);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n\n    // Create an image from the SVG content\n    const img = new Image();\n    const svgBlob = new Blob([svgContent], { type: 'image/svg+xml;charset=utf-8' });\n    const url = URL.createObjectURL(svgBlob);\n\n    img.onload = function() {\n      // Draw the original image\n      ctx.drawImage(img, 0, 0, fisheyeSize, fisheyeSize);\n\n      // Get image data\n      const imageData = ctx.getImageData(0, 0, fisheyeSize, fisheyeSize);\n      const pixels = imageData.data;\n      const pixelsCopy = [];\n\n      // Copy pixels\n      for (let i = 0; i < pixels.length; i += 4) {\n        pixelsCopy.push([pixels[i], pixels[i+1], pixels[i+2], pixels[i+3]]);\n      }\n\n      // Apply fisheye effect\n      const result = fisheye(pixelsCopy, fisheyeSize, fisheyeSize);\n\n      // Update image data\n      for (let i = 0; i < result.length; i++) {\n        const index = i * 4;\n        if (result[i] !== undefined) {\n          pixels[index] = result[i][0];\n          pixels[index + 1] = result[i][1];\n          pixels[index + 2] = result[i][2];\n          pixels[index + 3] = result[i][3];\n        }\n      }\n\n      // Put the modified image data back to the canvas\n      ctx.putImageData(imageData, 0, 0);\n\n      // Scale up the canvas to match the original SVG size\n      const container = containerRef.current;\n      container.style.width = `${width}px`;\n      container.style.height = `${height}px`;\n      container.style.display = 'flex';\n      container.style.justifyContent = 'center';\n      container.style.alignItems = 'center';\n      canvas.style.width = `${fisheyeSize}px`;\n      canvas.style.height = `${fisheyeSize}px`;\n    };\n\n    img.src = url;\n\n    return () => URL.revokeObjectURL(url);\n  }, [svgContent, width, height, fisheyeSize]);\n\n  function fisheye(srcpixels, w, h) {\n    // ... (keep the existing fisheye function)\n  }\n\n  return (\n    <div ref={containerRef}>\n      <canvas ref={canvasRef} width={fisheyeSize} height={fisheyeSize} />\n    </div>\n  );\n};\n\nexport default FisheyeImage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}