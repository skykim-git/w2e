{"ast":null,"code":"var _jsxFileName = \"/Users/friday/Documents/TaskForceOrganization/frontend/src/components/TodoList.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport TodoItem from './TodoItem';\nimport { selectTodo } from 'redux/selectors';\nimport { fetchTodos } from 'redux/operations';\nimport Pagination from '../utils/Pagination';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PAGE_SIZE = 5;\nconst TodoList = () => {\n  _s();\n  const dispatch = useDispatch();\n  const todos = useSelector(selectTodo);\n  const [currentPage, setCurrentPage] = useState(0);\n  const [items, setItems] = useState([]);\n  useEffect(() => {\n    const reversed = [...todos].reverse();\n    const paginatedTodos = reversed.slice(currentPage * PAGE_SIZE, (currentPage + 1) * PAGE_SIZE).map((todo, index) => ({\n      ...todo,\n      index: currentPage * PAGE_SIZE + index + 1\n    }));\n    setItems(paginatedTodos);\n  }, [currentPage, todos]);\n  useEffect(() => {\n    toast.promise(dispatch(fetchTodos()), {\n      pending: 'TODO List is pending',\n      success: 'TODO List resolved ðŸ‘Œ',\n      error: 'TODO List rejected ðŸ¤¯'\n    });\n  }, [dispatch]);\n  const handlePageChange = ({\n    selected\n  }) => {\n    setCurrentPage(selected);\n  };\n  const onDragEnd = result => {\n    if (!result.destination) return;\n    if (result.destination.droppableId === result.source.droppableId && result.destination.index === result.source.index) {\n      return;\n    }\n    const startIndex = currentPage * PAGE_SIZE; // Calculate the start index based on current page\n    const newItems = Array.from(items);\n    const [removed] = newItems.splice(result.source.index, 1);\n    newItems.splice(result.destination.index, 0, removed);\n\n    // Update indices dynamically\n    newItems.forEach((item, index) => {\n      item.index = startIndex + index + 1;\n    });\n    setItems(newItems);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"tasks\",\n      children: /*#__PURE__*/_jsxDEV(DragDropContext, {\n        onDragEnd: onDragEnd,\n        children: /*#__PURE__*/_jsxDEV(Droppable, {\n          droppableId: \"droppable\",\n          children: provided => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tasks-div\",\n            ...provided.droppableProps,\n            ref: provided.innerRef,\n            children: [items.map((todo, index) => /*#__PURE__*/_jsxDEV(Draggable, {\n              draggableId: todo._id,\n              index: index,\n              children: (provided, snapshot) => /*#__PURE__*/_jsxDEV(TodoItem, {\n                todo: todo,\n                provided: provided,\n                snapshot: snapshot\n              }, todo._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 23\n              }, this)\n            }, todo._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 19\n            }, this)), provided.placeholder]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), todos.length > PAGE_SIZE && /*#__PURE__*/_jsxDEV(Pagination, {\n      pageCount: Math.ceil(todos.length / PAGE_SIZE),\n      onPageChange: handlePageChange,\n      currentPage: currentPage,\n      todosLength: todos.length,\n      PAGE_SIZE: PAGE_SIZE\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n_s(TodoList, \"GYEE9qWHhBzUMInimwN1fYipn3s=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = TodoList;\nexport default TodoList;\nvar _c;\n$RefreshReg$(_c, \"TodoList\");","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","DragDropContext","Droppable","Draggable","TodoItem","selectTodo","fetchTodos","Pagination","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","PAGE_SIZE","TodoList","_s","dispatch","todos","currentPage","setCurrentPage","items","setItems","reversed","reverse","paginatedTodos","slice","map","todo","index","promise","pending","success","error","handlePageChange","selected","onDragEnd","result","destination","droppableId","source","startIndex","newItems","Array","from","removed","splice","forEach","item","children","className","provided","droppableProps","ref","innerRef","draggableId","_id","snapshot","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","length","pageCount","Math","ceil","onPageChange","todosLength","_c","$RefreshReg$"],"sources":["/Users/friday/Documents/TaskForceOrganization/frontend/src/components/TodoList.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\n\nimport TodoItem from './TodoItem';\nimport { selectTodo } from 'redux/selectors';\nimport { fetchTodos } from 'redux/operations';\nimport Pagination from '../utils/Pagination';\nimport { toast } from 'react-toastify';\n\nconst PAGE_SIZE = 5;\n\nconst TodoList = () => {\n  const dispatch = useDispatch();\n  const todos = useSelector(selectTodo);\n  const [currentPage, setCurrentPage] = useState(0);\n  const [items, setItems] = useState([]);\n\n  useEffect(() => {\n    const reversed = [...todos].reverse();\n    const paginatedTodos = reversed.slice(\n      currentPage * PAGE_SIZE,\n      (currentPage + 1) * PAGE_SIZE,\n    ).map((todo, index) => ({ ...todo, index: currentPage * PAGE_SIZE + index + 1 }));\n    setItems(paginatedTodos);\n  }, [currentPage, todos]);\n\n  useEffect(() => {\n    toast.promise(dispatch(fetchTodos()), {\n      pending: 'TODO List is pending',\n      success: 'TODO List resolved ðŸ‘Œ',\n      error: 'TODO List rejected ðŸ¤¯',\n    });\n  }, [dispatch]);\n\n  const handlePageChange = ({ selected }) => {\n    setCurrentPage(selected);\n  };\n\n  const onDragEnd = result => {\n    if (!result.destination) return;\n\n    if (\n      result.destination.droppableId === result.source.droppableId &&\n      result.destination.index === result.source.index\n    ) {\n      return;\n    }\n\n    const startIndex = currentPage * PAGE_SIZE; // Calculate the start index based on current page\n    const newItems = Array.from(items);\n    const [removed] = newItems.splice(result.source.index, 1);\n    newItems.splice(result.destination.index, 0, removed);\n\n    // Update indices dynamically\n    newItems.forEach((item, index) => {\n      item.index = startIndex + index + 1;\n    });\n\n    setItems(newItems);\n  };\n\n  return (\n    <>\n      <ul className=\"tasks\">\n        <DragDropContext onDragEnd={onDragEnd}>\n          <Droppable droppableId=\"droppable\">\n            {provided => (\n              <div\n                className=\"tasks-div\"\n                {...provided.droppableProps}\n                ref={provided.innerRef}\n              >\n                {items.map((todo, index) => (\n                  <Draggable\n                    key={todo._id}\n                    draggableId={todo._id}\n                    index={index}\n                  >\n                    {(provided, snapshot) => (\n                      <TodoItem\n                        key={todo._id}\n                        todo={todo}\n                        provided={provided}\n                        snapshot={snapshot}\n                      />\n                    )}\n                  </Draggable>\n                ))}\n                {provided.placeholder}\n              </div>\n            )}\n          </Droppable>\n        </DragDropContext>\n      </ul>\n      {todos.length > PAGE_SIZE && (\n        <Pagination\n          pageCount={Math.ceil(todos.length / PAGE_SIZE)}\n          onPageChange={handlePageChange}\n          currentPage={currentPage}\n          todosLength={todos.length}\n          PAGE_SIZE={PAGE_SIZE}\n        />\n      )}\n    </>\n  );\n};\n\nexport default TodoList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}