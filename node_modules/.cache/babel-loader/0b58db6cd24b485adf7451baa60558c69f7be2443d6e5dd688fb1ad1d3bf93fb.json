{"ast":null,"code":"var _jsxFileName = \"/Users/friday/Documents/w2e/frontend/src/components/NearbyRestaurants.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useJsApiLoader, GoogleMap } from '@react-google-maps/api';\nimport './style.css';\nimport './mag.css';\nimport nlp from 'compromise';\nimport FisheyeImage from './FisheyeImage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction NearbyRestaurants() {\n  _s();\n  const {\n    isLoaded\n  } = useJsApiLoader({\n    id: 'google-map-script',\n    googleMapsApiKey: process.env.REACT_APP_API_KEY,\n    libraries: ['places']\n  });\n  const [bestRestaurants, setBestRestaurants] = useState([]);\n  const [nextPageToken, setNextPageToken] = useState(null);\n  const [showMapModal, setShowMapModal] = useState(false);\n  const [currentLocation, setCurrentLocation] = useState(null);\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [showFirstPage, setShowFirstPage] = useState(true);\n  const [isSpinning, setIsSpinning] = useState(false);\n  const [restReady, setRestReady] = useState(false);\n  const [mostRepeatedNouns, setMostRepeatedNouns] = useState([]);\n  const [travelTimes, setTravelTimes] = useState({});\n  useEffect(() => {\n    if (isLoaded && navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(searchNearbyRestaurants);\n    } else {\n      console.log(\"Geolocation is not supported by this browser.\");\n    }\n  }, [isLoaded]);\n  const calculateDistance = (lat1, lon1, lat2, lon2) => {\n    const R = 6371; // Radius of the earth in km\n    const dLat = deg2rad(lat2 - lat1);\n    const dLon = deg2rad(lon2 - lon1);\n    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    const distance = R * c; // Distance in km\n    return distance;\n  };\n  const deg2rad = deg => {\n    return deg * (Math.PI / 180);\n  };\n  const estimateWalkingTime = distanceKm => {\n    const walkingSpeedKmPerHour = 5; // Average walking speed\n    const timeHours = distanceKm / walkingSpeedKmPerHour;\n    const timeMinutes = Math.round(timeHours * 60);\n    return timeMinutes;\n  };\n  const calculateTravelTimes = useCallback((restaurants, origin) => {\n    const service = new window.google.maps.DistanceMatrixService();\n    const destinations = restaurants.map(restaurant => ({\n      lat: restaurant.geometry.location.lat(),\n      lng: restaurant.geometry.location.lng()\n    }));\n    const request = {\n      origins: [origin],\n      destinations: destinations,\n      travelMode: 'DRIVING',\n      unitSystem: window.google.maps.UnitSystem.METRIC\n    };\n    service.getDistanceMatrix(request, (response, status) => {\n      if (status === 'OK') {\n        const newTravelTimes = {};\n        restaurants.forEach((restaurant, index) => {\n          console.log(response, \"response\");\n          const result = response.rows[0].elements[index];\n          if (result.status === 'OK') {\n            newTravelTimes[restaurant.place_id] = result.duration.text;\n          } else {\n            console.error('Error for restaurant:', restaurant.name, 'Status:', result.status);\n            newTravelTimes[restaurant.place_id] = 'N/A';\n          }\n        });\n        setTravelTimes(newTravelTimes);\n      } else {\n        console.error('Error calculating travel times:', status);\n        console.error('Request:', request);\n        console.error('Response:', response);\n      }\n    });\n  }, []);\n  const fetchMoreReviews = useCallback(nextPageToken => {\n    return new Promise((resolve, reject) => {\n      const placesService = new window.google.maps.places.PlacesService(document.createElement('div'));\n      const additionalRequest = {\n        nextPageToken: nextPageToken\n      };\n      placesService.getDetails(additionalRequest, (placeDetails, status) => {\n        if (status === window.google.maps.places.PlacesServiceStatus.OK) {\n          const additionalReviews = placeDetails.reviews || [];\n          const additionalReviewTexts = additionalReviews.map(review => review.text);\n          resolve(additionalReviewTexts);\n        } else {\n          console.error('Error fetching additional reviews:', status);\n          reject();\n        }\n      });\n    });\n  }, []);\n  const searchNearbyRestaurants = useCallback(position => {\n    const {\n      latitude,\n      longitude\n    } = position.coords;\n    setCurrentLocation({\n      lat: latitude,\n      lng: longitude\n    });\n    const placesService = new window.google.maps.places.PlacesService(document.createElement('div'));\n    const request = {\n      location: new window.google.maps.LatLng(latitude, longitude),\n      radius: 50000,\n      type: 'restaurant',\n      rankBy: window.google.maps.places.RankBy.PROMINENCE,\n      types: ['restaurant']\n    };\n    placesService.nearbySearch(request, (results, status, pagination) => {\n      if (status === window.google.maps.places.PlacesServiceStatus.OK) {\n        const filteredRestaurants = results.filter(restaurant => {\n          return restaurant.rating >= 4.0 && restaurant.user_ratings_total >= 30 && !restaurant.name.toLowerCase().includes('hotel');\n        });\n        const promises = filteredRestaurants.map(restaurant => {\n          return new Promise((resolve, reject) => {\n            const detailsRequest = {\n              placeId: restaurant.place_id,\n              fields: ['name', 'types', 'reviews', 'price_level', 'formatted_address']\n            };\n            placesService.getDetails(detailsRequest, (placeDetails, status) => {\n              if (status === window.google.maps.places.PlacesServiceStatus.OK) {\n                const topReview = placeDetails.reviews && placeDetails.reviews.length > 0 ? placeDetails.reviews[0] : 'null';\n                resolve({\n                  ...restaurant,\n                  topReview\n                });\n              } else {\n                console.error('Error fetching restaurant details:', status);\n                reject(status);\n              }\n            });\n          });\n        });\n        const reviewPromises = filteredRestaurants.map(restaurant => {\n          return new Promise((resolve, reject) => {\n            const detailsRequest = {\n              placeId: restaurant.place_id,\n              fields: ['reviews']\n            };\n            placesService.getDetails(detailsRequest, (placeDetails, status) => {\n              if (status === window.google.maps.places.PlacesServiceStatus.OK) {\n                const reviews = placeDetails.reviews || [];\n                const reviewTexts = reviews.map(review => review.text);\n                if (placeDetails.next_page_token) {\n                  fetchMoreReviews(placeDetails.next_page_token).then(additionalReviews => {\n                    resolve([...reviewTexts, ...additionalReviews]);\n                  }).catch(error => {\n                    console.error('Error fetching additional reviews:', error);\n                    resolve(reviewTexts);\n                  });\n                } else {\n                  resolve(reviewTexts);\n                }\n              } else {\n                console.error('Error fetching reviews for restaurant:', status);\n                reject();\n              }\n            });\n          });\n        });\n        Promise.all([...promises, ...reviewPromises]).then(results => {\n          const restaurantsWithReviews = results.slice(0, promises.length);\n          const reviewTextsArray = results.slice(promises.length);\n          setBestRestaurants(restaurantsWithReviews);\n          setBestRestaurants(restaurantsWithReviews);\n          calculateTravelTimes(restaurantsWithReviews, {\n            lat: latitude,\n            lng: longitude\n          });\n          setRestReady(true);\n          const newMostRepeatedNouns = reviewTextsArray.map(reviewTexts => {\n            const allReviewsText = [].concat.apply([], reviewTexts);\n            const giantString = allReviewsText.join(' ');\n            const doc = nlp(giantString);\n            const nouns = doc.nouns().out('array');\n            const exclusionList = [\"i\", \"you\", \"he\", \"she\", \"it\", \"we\", \"they\", \"me\", \"him\", \"her\", \"us\", \"them\", \"my\", \"your\", \"his\", \"its\", \"our\", \"their\", \"mine\", \"yours\", \"hers\", \"ours\", \"theirs\", \"a\", \"an\", \"the\", \"food\", \"place\", \"staff\", \"won\", \"bad\", \"great\", \"and\"];\n            const individualNouns = nouns.flatMap(phrase => phrase.toLowerCase().split(/\\W+/)).filter(word => word && !exclusionList.includes(word));\n            const nounCounts = {};\n            individualNouns.forEach(noun => {\n              nounCounts[noun] = (nounCounts[noun] || 0) + 1;\n            });\n            let mostRepeatedNoun;\n            let maxCount = 0;\n            Object.entries(nounCounts).forEach(([noun, count]) => {\n              if (count > maxCount) {\n                mostRepeatedNoun = noun;\n                maxCount = count;\n              }\n            });\n            return mostRepeatedNoun || '';\n          });\n          setMostRepeatedNouns(newMostRepeatedNouns);\n        }).catch(error => {\n          console.error('Error fetching restaurant details:', error);\n        });\n      } else {\n        console.error('Error fetching nearby restaurants:', status);\n      }\n    });\n  }, [fetchMoreReviews]);\n  const moveToNextRestaurant = useCallback(() => {\n    setCurrentIndex(prevIndex => prevIndex + 1);\n  }, []);\n  const handlePrevious = useCallback(() => {\n    setCurrentIndex(prevIndex => prevIndex > 0 ? prevIndex - 1 : 0);\n  }, []);\n  const handleButtonClick = useCallback(() => {\n    setIsSpinning(prevState => !prevState);\n    setTimeout(() => {\n      setShowFirstPage(false);\n    }, 3000);\n  }, []);\n  const renderFirstPage = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        height: '100vh'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: `${isSpinning ? 'spinning-text' : ''} custom-heading`,\n        style: {\n          marginTop: '50px',\n          fontSize: '200px'\n        },\n        children: \"W2E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"custom-body\",\n        onClick: handleButtonClick,\n        style: {\n          marginTop: '20px',\n          padding: '10px',\n          backgroundColor: '#ff5722',\n          color: 'black',\n          border: 'none',\n          borderRadius: '5px',\n          cursor: 'pointer'\n        },\n        children: \"Start\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 7\n    }, this);\n  };\n  const renderRestaurantPage = () => {\n    const restaurant = bestRestaurants[currentIndex] || {};\n    const travelTime = travelTimes[restaurant.place_id] || 'Calculating...';\n    const svgContent = `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100\" height=\"50\">\n      <rect width=\"100%\" height=\"100%\" fill=\"white\" />\n      <text x=\"50%\" y=\"50%\" dominant-baseline=\"middle\" text-anchor=\"middle\" fill=\"orange\" font-size=\"40\">\n      ${mostRepeatedNouns[currentIndex] || ''}\n      </text>\n    </svg>`;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center'\n      },\n      children: [bestRestaurants.length - 1 >= currentIndex ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          marginTop: '0px',\n          marginBottom: '0px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"custom-heading\",\n          style: {\n            marginTop: '50px',\n            fontSize: '100px',\n            marginBottom: '00px'\n          },\n          children: restaurant.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            marginTop: '0px',\n            marginBottom: '0px'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(restaurant.name)}&query_place_id=${restaurant.place_id}`,\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            children: /*#__PURE__*/_jsxDEV(FisheyeImage, {\n              svgContent: svgContent\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          marginTop: '0px',\n          marginBottom: '0px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"custom-heading\",\n          style: {\n            marginTop: '50px',\n            fontSize: '100px'\n          },\n          children: \"Hmm...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"custom-body\",\n          style: {\n            height: '190px',\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            justifyContent: 'center',\n            marginTop: '20px'\n          },\n          children: \"Why don't you use Google Maps now?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"custom-heading\",\n        style: {\n          marginTop: '0px',\n          fontSize: '30px',\n          marginBottom: '20px'\n        },\n        children: [\"Price Point: \", restaurant.price_level !== undefined ? '$'.repeat(restaurant.price_level) : 'Not available']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"custom-heading\",\n        style: {\n          marginTop: '0px',\n          fontSize: '30px',\n          marginBottom: '20px'\n        },\n        children: [\"Walking Time: \", travelTime]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"custom-body\",\n        onClick: moveToNextRestaurant,\n        style: {\n          marginTop: '0px',\n          padding: '10px',\n          backgroundColor: '#ff5722',\n          color: 'black',\n          border: 'none',\n          borderRadius: '5px',\n          cursor: 'pointer'\n        },\n        children: \"Next Restaurant\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"custom-body\",\n        onClick: handlePrevious,\n        disabled: currentIndex === 0,\n        style: {\n          fontSize: '10px',\n          marginTop: '20px',\n          padding: '10px',\n          backgroundColor: '#ff5722',\n          color: 'black',\n          border: 'none',\n          borderRadius: '5px',\n          cursor: 'pointer'\n        },\n        children: \"Previous\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 7\n    }, this);\n  };\n  if (!isLoaded) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 298,\n    columnNumber: 25\n  }, this);\n  return showFirstPage ? renderFirstPage() : renderRestaurantPage();\n}\n_s(NearbyRestaurants, \"2l4lfJIC0CfK0JlzsCr83F9RuJk=\", false, function () {\n  return [useJsApiLoader];\n});\n_c = NearbyRestaurants;\nexport default NearbyRestaurants;\nvar _c;\n$RefreshReg$(_c, \"NearbyRestaurants\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useJsApiLoader","GoogleMap","nlp","FisheyeImage","jsxDEV","_jsxDEV","NearbyRestaurants","_s","isLoaded","id","googleMapsApiKey","process","env","REACT_APP_API_KEY","libraries","bestRestaurants","setBestRestaurants","nextPageToken","setNextPageToken","showMapModal","setShowMapModal","currentLocation","setCurrentLocation","currentIndex","setCurrentIndex","showFirstPage","setShowFirstPage","isSpinning","setIsSpinning","restReady","setRestReady","mostRepeatedNouns","setMostRepeatedNouns","travelTimes","setTravelTimes","navigator","geolocation","getCurrentPosition","searchNearbyRestaurants","console","log","calculateDistance","lat1","lon1","lat2","lon2","R","dLat","deg2rad","dLon","a","Math","sin","cos","c","atan2","sqrt","distance","deg","PI","estimateWalkingTime","distanceKm","walkingSpeedKmPerHour","timeHours","timeMinutes","round","calculateTravelTimes","restaurants","origin","service","window","google","maps","DistanceMatrixService","destinations","map","restaurant","lat","geometry","location","lng","request","origins","travelMode","unitSystem","UnitSystem","METRIC","getDistanceMatrix","response","status","newTravelTimes","forEach","index","result","rows","elements","place_id","duration","text","error","name","fetchMoreReviews","Promise","resolve","reject","placesService","places","PlacesService","document","createElement","additionalRequest","getDetails","placeDetails","PlacesServiceStatus","OK","additionalReviews","reviews","additionalReviewTexts","review","position","latitude","longitude","coords","LatLng","radius","type","rankBy","RankBy","PROMINENCE","types","nearbySearch","results","pagination","filteredRestaurants","filter","rating","user_ratings_total","toLowerCase","includes","promises","detailsRequest","placeId","fields","topReview","length","reviewPromises","reviewTexts","next_page_token","then","catch","all","restaurantsWithReviews","slice","reviewTextsArray","newMostRepeatedNouns","allReviewsText","concat","apply","giantString","join","doc","nouns","out","exclusionList","individualNouns","flatMap","phrase","split","word","nounCounts","noun","mostRepeatedNoun","maxCount","Object","entries","count","moveToNextRestaurant","prevIndex","handlePrevious","handleButtonClick","prevState","setTimeout","renderFirstPage","style","display","flexDirection","alignItems","justifyContent","height","children","className","marginTop","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","onClick","padding","backgroundColor","color","border","borderRadius","cursor","renderRestaurantPage","travelTime","svgContent","marginBottom","href","encodeURIComponent","target","rel","price_level","undefined","repeat","disabled","_c","$RefreshReg$"],"sources":["/Users/friday/Documents/w2e/frontend/src/components/NearbyRestaurants.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useJsApiLoader, GoogleMap } from '@react-google-maps/api';\nimport './style.css';\nimport './mag.css';\nimport nlp from 'compromise';\nimport FisheyeImage from './FisheyeImage';\n\nfunction NearbyRestaurants() {\n  const { isLoaded } = useJsApiLoader({\n    id: 'google-map-script',\n    googleMapsApiKey: process.env.REACT_APP_API_KEY,\n    libraries: ['places']\n  });\n\n  const [bestRestaurants, setBestRestaurants] = useState([]);\n  const [nextPageToken, setNextPageToken] = useState(null);\n  const [showMapModal, setShowMapModal] = useState(false);\n  const [currentLocation, setCurrentLocation] = useState(null);\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [showFirstPage, setShowFirstPage] = useState(true);\n  const [isSpinning, setIsSpinning] = useState(false);\n  const [restReady, setRestReady] = useState(false);\n  const [mostRepeatedNouns, setMostRepeatedNouns] = useState([]);\n  const [travelTimes, setTravelTimes] = useState({});\n\n  useEffect(() => {\n    if (isLoaded && navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(searchNearbyRestaurants);\n    } else {\n      console.log(\"Geolocation is not supported by this browser.\");\n    }\n  }, [isLoaded]);\n\n  const calculateDistance = (lat1, lon1, lat2, lon2) => {\n    const R = 6371; // Radius of the earth in km\n    const dLat = deg2rad(lat2 - lat1);\n    const dLon = deg2rad(lon2 - lon1);\n    const a = \n      Math.sin(dLat/2) * Math.sin(dLat/2) +\n      Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * \n      Math.sin(dLon/2) * Math.sin(dLon/2)\n    ; \n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); \n    const distance = R * c; // Distance in km\n    return distance;\n  };\n  \n  const deg2rad = (deg) => {\n    return deg * (Math.PI/180);\n  };\n  \n  const estimateWalkingTime = (distanceKm) => {\n    const walkingSpeedKmPerHour = 5; // Average walking speed\n    const timeHours = distanceKm / walkingSpeedKmPerHour;\n    const timeMinutes = Math.round(timeHours * 60);\n    return timeMinutes;\n  };\n\n  const calculateTravelTimes = useCallback((restaurants, origin) => {\n    const service = new window.google.maps.DistanceMatrixService();\n    \n    const destinations = restaurants.map(restaurant => ({\n      lat: restaurant.geometry.location.lat(),\n      lng: restaurant.geometry.location.lng()\n    }));\n  \n    const request = {\n      origins: [origin],\n      destinations: destinations,\n      travelMode: 'DRIVING',\n      unitSystem: window.google.maps.UnitSystem.METRIC,\n    };\n  \n    service.getDistanceMatrix(request, (response, status) => {\n      if (status === 'OK') {\n        const newTravelTimes = {};\n        restaurants.forEach((restaurant, index) => {\n          console.log(response,\"response\")\n          const result = response.rows[0].elements[index];\n          if (result.status === 'OK') {\n            newTravelTimes[restaurant.place_id] = result.duration.text;\n          } else {\n            console.error('Error for restaurant:', restaurant.name, 'Status:', result.status);\n            newTravelTimes[restaurant.place_id] = 'N/A';\n          }\n        });\n        setTravelTimes(newTravelTimes);\n      } else {\n        console.error('Error calculating travel times:', status);\n        console.error('Request:', request);\n        console.error('Response:', response);\n      }\n    });\n  }, []);\n\n  const fetchMoreReviews = useCallback((nextPageToken) => {\n    return new Promise((resolve, reject) => {\n      const placesService = new window.google.maps.places.PlacesService(document.createElement('div'));\n      const additionalRequest = { nextPageToken: nextPageToken };\n      placesService.getDetails(additionalRequest, (placeDetails, status) => {\n        if (status === window.google.maps.places.PlacesServiceStatus.OK) {\n          const additionalReviews = placeDetails.reviews || [];\n          const additionalReviewTexts = additionalReviews.map(review => review.text);\n          resolve(additionalReviewTexts);\n        } else {\n          console.error('Error fetching additional reviews:', status);\n          reject();\n        }\n      });\n    });\n  }, []);\n\n  const searchNearbyRestaurants = useCallback((position) => {\n    const { latitude, longitude } = position.coords;\n    setCurrentLocation({ lat: latitude, lng: longitude });\n\n    const placesService = new window.google.maps.places.PlacesService(document.createElement('div'));\n\n    const request = {\n      location: new window.google.maps.LatLng(latitude, longitude),\n      radius: 50000,\n      type: 'restaurant',\n      rankBy: window.google.maps.places.RankBy.PROMINENCE,\n      types: ['restaurant']\n    };\n\n    placesService.nearbySearch(request, (results, status, pagination) => {\n      if (status === window.google.maps.places.PlacesServiceStatus.OK) {\n        const filteredRestaurants = results.filter(restaurant => {\n          return restaurant.rating >= 4.0 && restaurant.user_ratings_total >= 30 &&\n           !restaurant.name.toLowerCase().includes('hotel');\n        });\n\n        const promises = filteredRestaurants.map(restaurant => {\n          return new Promise((resolve, reject) => {\n            const detailsRequest = {\n              placeId: restaurant.place_id,\n              fields: ['name', 'types', 'reviews', 'price_level', 'formatted_address'],\n            };\n            placesService.getDetails(detailsRequest, (placeDetails, status) => {\n              if (status === window.google.maps.places.PlacesServiceStatus.OK) {\n                const topReview = placeDetails.reviews && placeDetails.reviews.length > 0 ? placeDetails.reviews[0] : 'null';\n                resolve({ ...restaurant, topReview });\n              } else {\n                console.error('Error fetching restaurant details:', status);\n                reject(status);\n              }\n            });\n          });\n        });\n\n        const reviewPromises = filteredRestaurants.map(restaurant => {\n          return new Promise((resolve, reject) => {\n            const detailsRequest = {\n              placeId: restaurant.place_id,\n              fields: ['reviews']\n            };\n            placesService.getDetails(detailsRequest, (placeDetails, status) => {\n              if (status === window.google.maps.places.PlacesServiceStatus.OK) {\n                const reviews = placeDetails.reviews || [];\n                const reviewTexts = reviews.map(review => review.text);\n                if (placeDetails.next_page_token) {\n                  fetchMoreReviews(placeDetails.next_page_token)\n                    .then(additionalReviews => {\n                      resolve([...reviewTexts, ...additionalReviews]);\n                    })\n                    .catch(error => {\n                      console.error('Error fetching additional reviews:', error);\n                      resolve(reviewTexts);\n                    });\n                } else {\n                  resolve(reviewTexts);\n                }\n              } else {\n                console.error('Error fetching reviews for restaurant:', status);\n                reject();\n              }\n            });\n          });\n        });\n\n        Promise.all([...promises, ...reviewPromises])\n          .then(results => {\n            const restaurantsWithReviews = results.slice(0, promises.length);\n            const reviewTextsArray = results.slice(promises.length);\n            setBestRestaurants(restaurantsWithReviews);\n            setBestRestaurants(restaurantsWithReviews);\n            calculateTravelTimes(restaurantsWithReviews, { lat: latitude, lng: longitude });\n            setRestReady(true);\n\n            const newMostRepeatedNouns = reviewTextsArray.map((reviewTexts) => {\n              const allReviewsText = [].concat.apply([], reviewTexts);\n              const giantString = allReviewsText.join(' ');\n              const doc = nlp(giantString);\n              const nouns = doc.nouns().out('array');\n\n              const exclusionList = [\"i\", \"you\", \"he\", \"she\", \"it\", \"we\", \"they\", \"me\", \"him\", \"her\", \"us\", \"them\", \"my\", \"your\", \"his\", \"its\", \"our\", \"their\", \"mine\", \"yours\", \"hers\", \"ours\", \"theirs\", \"a\", \"an\", \"the\", \"food\", \"place\", \"staff\", \"won\", \"bad\", \"great\", \"and\"];\n              \n              const individualNouns = nouns.flatMap(phrase => phrase.toLowerCase().split(/\\W+/))\n                                            .filter(word => word && !exclusionList.includes(word));\n              \n              const nounCounts = {};\n              individualNouns.forEach(noun => {\n                nounCounts[noun] = (nounCounts[noun] || 0) + 1;\n              });\n\n              let mostRepeatedNoun;\n              let maxCount = 0;\n              Object.entries(nounCounts).forEach(([noun, count]) => {\n                if (count > maxCount) {\n                  mostRepeatedNoun = noun;\n                  maxCount = count;\n                }\n              });\n\n              return mostRepeatedNoun || '';\n            });\n\n            setMostRepeatedNouns(newMostRepeatedNouns);\n          })\n          .catch(error => {\n            console.error('Error fetching restaurant details:', error);\n          });\n      } else {\n        console.error('Error fetching nearby restaurants:', status);\n      }\n    });\n  }, [fetchMoreReviews]);\n\n  const moveToNextRestaurant = useCallback(() => {\n    setCurrentIndex(prevIndex => prevIndex + 1);\n  }, []);\n\n  const handlePrevious = useCallback(() => {\n    setCurrentIndex(prevIndex => prevIndex > 0 ? prevIndex - 1 : 0);\n  }, []);\n\n  const handleButtonClick = useCallback(() => {\n    setIsSpinning(prevState => !prevState);\n    setTimeout(() => {\n      setShowFirstPage(false);\n    }, 3000);\n  }, []);\n\n  const renderFirstPage = () => {\n    return (\n      <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', height: '100vh' }}>\n        <h1 className={`${isSpinning ? 'spinning-text' : ''} custom-heading`} style={{ marginTop: '50px', fontSize: '200px' }}>W2E</h1>\n        <button className=\"custom-body\" onClick={handleButtonClick} style={{ marginTop: '20px', padding: '10px', backgroundColor: '#ff5722', color: 'black', border: 'none', borderRadius: '5px', cursor: 'pointer' }}>Start</button>\n      </div>\n    );\n  };\n\n  const renderRestaurantPage = () => {\n    const restaurant = bestRestaurants[currentIndex] || {};\n    const travelTime = travelTimes[restaurant.place_id] || 'Calculating...';\n    const svgContent = `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100\" height=\"50\">\n      <rect width=\"100%\" height=\"100%\" fill=\"white\" />\n      <text x=\"50%\" y=\"50%\" dominant-baseline=\"middle\" text-anchor=\"middle\" fill=\"orange\" font-size=\"40\">\n      ${mostRepeatedNouns[currentIndex] || ''}\n      </text>\n    </svg>`;\n\n    return (\n      <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n        {bestRestaurants.length - 1 >= currentIndex ? (\n          <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', marginTop: '0px', marginBottom: '0px' }}>\n            <h1 className=\"custom-heading\" style={{ marginTop: '50px', fontSize: '100px', marginBottom: '00px'}}>{restaurant.name}</h1>\n            <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', marginTop: '0px', marginBottom: '0px' }}>\n              <a href={`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(restaurant.name)}&query_place_id=${restaurant.place_id}`} \n                 target=\"_blank\" \n                 rel=\"noopener noreferrer\">\n                <FisheyeImage svgContent={svgContent} />\n              </a>\n            </div>\n          </div>\n        ) : (\n          <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', marginTop: '0px', marginBottom: '0px' }}>\n            <h1 className=\"custom-heading\" style={{ marginTop: '50px', fontSize: '100px' }}>Hmm...</h1>\n            <p className=\"custom-body\" style={{ height: '190px', display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', marginTop: '20px' }}>Why don't you use Google Maps now?</p>\n          </div>\n        )}\n        <h1 className=\"custom-heading\" style={{ marginTop: '0px', fontSize: '30px', marginBottom: '20px'}}>{\"Price Point: \"}{restaurant.price_level !== undefined ? '$'.repeat(restaurant.price_level) : 'Not available'}</h1>\n        <h1 className=\"custom-heading\" style={{ marginTop: '0px', fontSize: '30px', marginBottom: '20px'}}>\n          {\"Walking Time: \"}{travelTime}\n        </h1>\n        <button className=\"custom-body\" onClick={moveToNextRestaurant} style={{ marginTop: '0px', padding: '10px', backgroundColor: '#ff5722', color: 'black', border: 'none', borderRadius: '5px', cursor: 'pointer' }}>\n          Next Restaurant\n        </button>\n        <button className=\"custom-body\" onClick={handlePrevious} disabled={currentIndex === 0} style={{ fontSize: '10px', marginTop: '20px', padding: '10px', backgroundColor: '#ff5722', color: 'black', border: 'none', borderRadius: '5px', cursor: 'pointer' }}>\n          Previous\n        </button>\n      </div>\n    );\n  };\n\n  if (!isLoaded) return <div>Loading...</div>;\n\n  return showFirstPage ? renderFirstPage() : renderRestaurantPage();\n}\n\nexport default NearbyRestaurants;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}