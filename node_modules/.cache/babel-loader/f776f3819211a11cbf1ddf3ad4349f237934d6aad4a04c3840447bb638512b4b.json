{"ast":null,"code":"var _jsxFileName = \"/Users/friday/Documents/w2e/frontend/src/components/NearbyRestaurants.jsx\";\nimport React, { Component } from 'react';\nimport { Map, GoogleApiWrapper } from 'google-maps-react';\nimport './style.css';\nimport './mag.css';\nimport nlp from 'compromise';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass NearbyRestaurants extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      bestRestaurants: [],\n      nextPageToken: null,\n      showMapModal: false,\n      currentLocation: null,\n      currentIndex: 0,\n      showFirstPage: true,\n      isSpinning: false,\n      restReady: false,\n      mostRepeatedNouns: []\n    };\n    this.searchNearbyRestaurants = position => {\n      const {\n        google\n      } = this.props;\n      const {\n        latitude,\n        longitude\n      } = position.coords;\n      const placesService = new google.maps.places.PlacesService(document.createElement('div'));\n      const request = {\n        location: new google.maps.LatLng(latitude, longitude),\n        radius: 50000,\n        type: 'restaurant',\n        rankBy: google.maps.places.RankBy.PROMINENCE,\n        types: ['restaurant']\n      };\n      function fetchMoreReviews(nextPageToken) {\n        return new Promise((resolve, reject) => {\n          const additionalRequest = {\n            nextPageToken: nextPageToken\n          };\n          placesService.getDetails(additionalRequest, (placeDetails, status) => {\n            if (status === google.maps.places.PlacesServiceStatus.OK) {\n              const additionalReviews = placeDetails.reviews || [];\n              const additionalReviewTexts = additionalReviews.map(review => review.text);\n              resolve(additionalReviewTexts);\n            } else {\n              console.error('Error fetching additional reviews:', status);\n              reject();\n            }\n          });\n        });\n      }\n      placesService.nearbySearch(request, (results, status, pagination) => {\n        if (status === google.maps.places.PlacesServiceStatus.OK) {\n          const filteredRestaurants = results.filter(restaurant => {\n            return restaurant.rating >= 4.0 && restaurant.user_ratings_total >= 30 && !restaurant.name.toLowerCase().includes('hotel');\n          });\n          const promises = filteredRestaurants.map(restaurant => {\n            return new Promise((resolve, reject) => {\n              const detailsRequest = {\n                placeId: restaurant.place_id,\n                fields: ['name', 'types', 'reviews']\n              };\n              placesService.getDetails(detailsRequest, (placeDetails, status) => {\n                if (status === google.maps.places.PlacesServiceStatus.OK) {\n                  const topReview = placeDetails.reviews && placeDetails.reviews.length > 0 ? placeDetails.reviews[0] : 'null';\n                  resolve({\n                    ...restaurant,\n                    topReview\n                  });\n                } else {\n                  console.error('Error fetching restaurant details:', status);\n                  reject(status);\n                }\n              });\n            });\n          });\n          const reviewPromises = filteredRestaurants.map(restaurant => {\n            return new Promise((resolve, reject) => {\n              const detailsRequest = {\n                placeId: restaurant.place_id,\n                fields: ['reviews']\n              };\n              placesService.getDetails(detailsRequest, (placeDetails, status) => {\n                if (status === google.maps.places.PlacesServiceStatus.OK) {\n                  const reviews = placeDetails.reviews || [];\n                  const reviewTexts = reviews.map(review => review.text);\n                  if (placeDetails.next_page_token) {\n                    fetchMoreReviews(placeDetails.next_page_token).then(additionalReviews => {\n                      resolve([...reviewTexts, ...additionalReviews]);\n                    }).catch(error => {\n                      console.error('Error fetching additional reviews:', error);\n                      resolve(reviewTexts);\n                    });\n                  } else {\n                    resolve(reviewTexts);\n                  }\n                  resolve(reviewTexts);\n                } else {\n                  console.error('Error fetching reviews for restaurant:', status);\n                  reject();\n                }\n              });\n            });\n          });\n          Promise.all([...promises, ...reviewPromises]).then(results => {\n            const restaurantsWithReviews = results.slice(0, promises.length);\n            const reviewTextsArray = results.slice(promises.length);\n            this.setState({\n              bestRestaurants: restaurantsWithReviews\n            });\n            this.setState({\n              restReady: true\n            });\n            const mostRepeatedNouns = [];\n            reviewTextsArray.forEach(reviewTexts => {\n              let mostRepeatedNoun;\n              let maxCount = 0;\n              const allReviewsText = [].concat.apply([], reviewTexts);\n              const giantString = allReviewsText.join(' ');\n              const allWords = allReviewsText.flatMap(text => text.toLowerCase().split(/[\\s\\W]+/));\n              const doc = nlp(giantString);\n              const nouns = doc.nouns().out('array');\n              const pronounsList = [\"i\", \"you\", \"he\", \"she\", \"it\", \"we\", \"they\", \"me\", \"him\", \"her\", \"us\", \"them\", \"my\", \"your\", \"his\", \"its\", \"our\", \"their\", \"mine\", \"yours\", \"hers\", \"ours\", \"theirs\"];\n              const filteredNouns = nouns.filter(noun => !pronounsList.includes(noun.toLowerCase()));\n              const nounCounts = filteredNouns.reduce((acc, noun) => {\n                acc[noun] = (acc[noun] || 0) + 1;\n                return acc;\n              }, {});\n              for (const noun in nounCounts) {\n                if (nounCounts[noun] > maxCount) {\n                  mostRepeatedNoun = noun;\n                  maxCount = nounCounts[noun];\n                }\n              }\n              mostRepeatedNouns.push(mostRepeatedNoun);\n            });\n            this.setState({\n              mostRepeatedNouns: mostRepeatedNouns\n            });\n            console.log('Most repeated nouns:', mostRepeatedNouns);\n          }).catch(error => {\n            console.error('Error fetching restaurant details and reviews:', error);\n          });\n          if (pagination && pagination.hasNextPage) {\n            this.setState({\n              nextPageToken: pagination.nextPageToken\n            });\n          }\n        } else {\n          console.error('Error fetching nearby restaurants:', status);\n        }\n      });\n    };\n    this.handlePrevious = () => {\n      this.setState(prevState => ({\n        currentIndex: (prevState.currentIndex - 1 + prevState.bestRestaurants.length) % prevState.bestRestaurants.length\n      }));\n    };\n    this.handleNext = () => {\n      this.setState(prevState => ({\n        currentIndex: (prevState.currentIndex + 1) % prevState.bestRestaurants.length\n      }));\n    };\n    this.toggleSpinning = () => {\n      this.setState(prevState => ({\n        isSpinning: !prevState.isSpinning\n      }));\n    };\n  }\n  componentDidMount() {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(this.searchNearbyRestaurants);\n    } else {\n      console.log(\"Geolocation is not supported by this browser.\");\n    }\n\n    // Fisheye effect initialization\n    const bg = document.getElementById('bg');\n    const c = document.getElementById('c');\n    const ctx = c.getContext('2d');\n    const src = \"https://lumiere-a.akamaihd.net/v1/images/r_thorragnarok_header_nowplaying_47d36193.jpeg?region=0,0,2048,680\";\n    const img = new Image();\n    img.crossOrigin = \"Anonymous\";\n    img.onload = function () {\n      const w = this.width,\n        h = this.height;\n      bg.width = w;\n      bg.height = h;\n      bg.style.marginLeft = -w / 2 + 'px';\n      bg.style.marginTop = -h / 2 + 'px';\n      bg.getContext('2d').drawImage(img, 0, 0, w, h);\n      window.addEventListener(\"mousemove\", distortion);\n      window.addEventListener(\"touchmove\", distortion);\n    };\n    img.src = src;\n    function distortion(e) {\n      const cx = e.touches ? e.touches[0].clientX : e.clientX,\n        cy = e.touches ? e.touches[0].clientY : e.clientY,\n        size = 200,\n        zoom = 1;\n      c.width = size;\n      c.height = size;\n      c.style.left = cx - size / 2 + 'px';\n      c.style.top = cy - size / 2 + 'px';\n      ctx.fillRect(0, 0, size, size);\n      ctx.drawImage(bg, cx - bg.offsetLeft - 0.5 * size / zoom, cy - bg.offsetTop - 0.5 * size / zoom, size / zoom, size / zoom, 0, 0, size, size);\n      const imgData = ctx.getImageData(0, 0, size, size);\n      const pixels = imgData.data;\n      const pixelsCopy = [];\n      let index = 0;\n      for (let i = 0; i <= pixels.length; i += 4) {\n        pixelsCopy[index] = [pixels[i], pixels[i + 1], pixels[i + 2], pixels[i + 3]];\n        index++;\n      }\n      const result = fisheye(pixelsCopy, size, size);\n      for (let i = 0; i < result.length; i++) {\n        index = 4 * i;\n        if (result[i] !== undefined) {\n          pixels[index + 0] = result[i][0];\n          pixels[index + 1] = result[i][1];\n          pixels[index + 2] = result[i][2];\n          pixels[index + 3] = result[i][3];\n        }\n      }\n      ctx.putImageData(imgData, 0, 0);\n    }\n    function fisheye(srcpixels, w, h) {\n      const dstpixels = srcpixels.slice();\n      for (let y = 0; y < h; y++) {\n        const ny = 2 * y / h - 1;\n        const ny2 = ny * ny;\n        for (let x = 0; x < w; x++) {\n          const nx = 2 * x / w - 1;\n          const nx2 = nx * nx;\n          const r = Math.sqrt(nx2 + ny2);\n          if (0.0 <= r && r <= 1.0) {\n            let nr = Math.sqrt(1.0 - r * r);\n            nr = (r + (1.0 - nr)) / 2.0;\n            if (nr <= 1.0) {\n              const theta = Math.atan2(ny, nx);\n              const nxn = nr * Math.cos(theta);\n              const nyn = nr * Math.sin(theta);\n              const x2 = parseInt((nxn + 1) * w / 2);\n              const y2 = parseInt((nyn + 1) * h / 2);\n              const srcpos = parseInt(y2 * w + x2);\n              if (srcpos >= 0 && srcpos < w * h) {\n                dstpixels[parseInt(y * w + x)] = srcpixels[srcpos];\n              }\n            }\n          }\n        }\n      }\n      return dstpixels;\n    }\n  }\n  renderRestaurantPage() {\n    const {\n      bestRestaurants,\n      currentIndex,\n      restReady,\n      mostRepeatedNouns\n    } = this.state;\n    const restaurant = bestRestaurants[currentIndex];\n    if (!restaurant || !restaurant.topReview) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 14\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `restaurant-page ${this.state.isSpinning ? 'spin' : ''}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"restaurant-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: restaurant.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: restaurant.vicinity\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: restaurant.types.join(', ')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Top Review:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: restaurant.topReview.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 9\n      }, this), restReady && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"most-repeated-nouns\",\n        id: \"mostRepeatedNounsContainer\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Most Repeated Nouns:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          id: \"mostRepeatedNouns\",\n          children: mostRepeatedNouns.map((noun, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: noun\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 7\n    }, this);\n  }\n  render() {\n    const {\n      currentLocation,\n      showFirstPage\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app-container\",\n      children: showFirstPage ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"first-page\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Welcome to Nearby Restaurants\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => this.setState({\n            showFirstPage: false\n          }),\n          children: \"Search Nearby Restaurants\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"restaurant-page-container\",\n        children: [currentLocation && /*#__PURE__*/_jsxDEV(Map, {\n          google: this.props.google,\n          zoom: 14,\n          initialCenter: currentLocation\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 15\n        }, this), this.renderRestaurantPage(), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: this.handlePrevious,\n            children: \"Previous\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: this.handleNext,\n            children: \"Next\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: this.toggleSpinning,\n            children: \"Toggle Spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n          id: \"c\",\n          width: \"200\",\n          height: \"200\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n          id: \"bg\",\n          style: {\n            display: 'none'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default GoogleApiWrapper({\n  apiKey: 'YOUR_GOOGLE_MAPS_API_KEY'\n})(NearbyRestaurants);","map":{"version":3,"names":["React","Component","Map","GoogleApiWrapper","nlp","jsxDEV","_jsxDEV","NearbyRestaurants","constructor","args","state","bestRestaurants","nextPageToken","showMapModal","currentLocation","currentIndex","showFirstPage","isSpinning","restReady","mostRepeatedNouns","searchNearbyRestaurants","position","google","props","latitude","longitude","coords","placesService","maps","places","PlacesService","document","createElement","request","location","LatLng","radius","type","rankBy","RankBy","PROMINENCE","types","fetchMoreReviews","Promise","resolve","reject","additionalRequest","getDetails","placeDetails","status","PlacesServiceStatus","OK","additionalReviews","reviews","additionalReviewTexts","map","review","text","console","error","nearbySearch","results","pagination","filteredRestaurants","filter","restaurant","rating","user_ratings_total","name","toLowerCase","includes","promises","detailsRequest","placeId","place_id","fields","topReview","length","reviewPromises","reviewTexts","next_page_token","then","catch","all","restaurantsWithReviews","slice","reviewTextsArray","setState","forEach","mostRepeatedNoun","maxCount","allReviewsText","concat","apply","giantString","join","allWords","flatMap","split","doc","nouns","out","pronounsList","filteredNouns","noun","nounCounts","reduce","acc","push","log","hasNextPage","handlePrevious","prevState","handleNext","toggleSpinning","componentDidMount","navigator","geolocation","getCurrentPosition","bg","getElementById","c","ctx","getContext","src","img","Image","crossOrigin","onload","w","width","h","height","style","marginLeft","marginTop","drawImage","window","addEventListener","distortion","e","cx","touches","clientX","cy","clientY","size","zoom","left","top","fillRect","offsetLeft","offsetTop","imgData","getImageData","pixels","data","pixelsCopy","index","i","result","fisheye","undefined","putImageData","srcpixels","dstpixels","y","ny","ny2","x","nx","nx2","r","Math","sqrt","nr","theta","atan2","nxn","cos","nyn","sin","x2","parseInt","y2","srcpos","renderRestaurantPage","children","fileName","_jsxFileName","lineNumber","columnNumber","className","vicinity","id","render","onClick","initialCenter","display","apiKey"],"sources":["/Users/friday/Documents/w2e/frontend/src/components/NearbyRestaurants.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { Map, GoogleApiWrapper } from 'google-maps-react';\nimport './style.css';\nimport './mag.css';\nimport nlp from 'compromise';\n\nclass NearbyRestaurants extends Component {\n  state = {\n    bestRestaurants: [],\n    nextPageToken: null,\n    showMapModal: false,\n    currentLocation: null,\n    currentIndex: 0,\n    showFirstPage: true,\n    isSpinning: false,\n    restReady: false,\n    mostRepeatedNouns: [],\n  };\n\n  componentDidMount() {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(this.searchNearbyRestaurants);\n    } else {\n      console.log(\"Geolocation is not supported by this browser.\");\n    }\n\n    // Fisheye effect initialization\n    const bg = document.getElementById('bg');\n    const c = document.getElementById('c');\n    const ctx = c.getContext('2d');\n    const src = \"https://lumiere-a.akamaihd.net/v1/images/r_thorragnarok_header_nowplaying_47d36193.jpeg?region=0,0,2048,680\";\n\n    const img = new Image();\n    img.crossOrigin = \"Anonymous\";\n    img.onload = function() {\n      const w = this.width,\n        h = this.height;\n      \n      bg.width = w;\n      bg.height = h;\n      bg.style.marginLeft = -w / 2 + 'px';\n      bg.style.marginTop = -h / 2 + 'px';\n\n      bg.getContext('2d').drawImage(img, 0, 0, w, h);\n\n      window.addEventListener(\"mousemove\", distortion);\n      window.addEventListener(\"touchmove\", distortion);\n    };\n    img.src = src;\n\n    function distortion(e) {\n      const cx = (e.touches ? e.touches[0].clientX : e.clientX),\n        cy = (e.touches ? e.touches[0].clientY : e.clientY),\n        size = 200,\n        zoom = 1;\n\n      c.width = size;\n      c.height = size;\n      c.style.left = cx - size / 2 + 'px';\n      c.style.top = cy - size / 2 + 'px';\n\n      ctx.fillRect(0, 0, size, size);\n      ctx.drawImage(\n        bg,\n        cx - bg.offsetLeft - 0.5 * size / zoom,\n        cy - bg.offsetTop - 0.5 * size / zoom,\n        size / zoom,\n        size / zoom,\n        0,\n        0,\n        size,\n        size\n      );\n\n      const imgData = ctx.getImageData(0, 0, size, size);\n      const pixels = imgData.data;\n      const pixelsCopy = [];\n      let index = 0;\n\n      for (let i = 0; i <= pixels.length; i += 4) {\n        pixelsCopy[index] = [pixels[i], pixels[i + 1], pixels[i + 2], pixels[i + 3]];\n        index++;\n      }\n\n      const result = fisheye(pixelsCopy, size, size);\n\n      for (let i = 0; i < result.length; i++) {\n        index = 4 * i;\n        if (result[i] !== undefined) {\n          pixels[index + 0] = result[i][0];\n          pixels[index + 1] = result[i][1];\n          pixels[index + 2] = result[i][2];\n          pixels[index + 3] = result[i][3];\n        }\n      }\n\n      ctx.putImageData(imgData, 0, 0);\n    }\n\n    function fisheye(srcpixels, w, h) {\n      const dstpixels = srcpixels.slice();\n\n      for (let y = 0; y < h; y++) {\n        const ny = ((2 * y) / h) - 1;\n        const ny2 = ny * ny;\n\n        for (let x = 0; x < w; x++) {\n          const nx = ((2 * x) / w) - 1;\n          const nx2 = nx * nx;\n          const r = Math.sqrt(nx2 + ny2);\n\n          if (0.0 <= r && r <= 1.0) {\n            let nr = Math.sqrt(1.0 - r * r);\n            nr = (r + (1.0 - nr)) / 2.0;\n\n            if (nr <= 1.0) {\n              const theta = Math.atan2(ny, nx);\n              const nxn = nr * Math.cos(theta);\n              const nyn = nr * Math.sin(theta);\n              const x2 = parseInt(((nxn + 1) * w) / 2);\n              const y2 = parseInt(((nyn + 1) * h) / 2);\n              const srcpos = parseInt(y2 * w + x2);\n              if (srcpos >= 0 && srcpos < w * h) {\n                dstpixels[parseInt(y * w + x)] = srcpixels[srcpos];\n              }\n            }\n          }\n        }\n      }\n      return dstpixels;\n    }\n  }\n\n  searchNearbyRestaurants = (position) => {\n    const { google } = this.props;\n    const { latitude, longitude } = position.coords;\n\n    const placesService = new google.maps.places.PlacesService(document.createElement('div'));\n\n    const request = {\n      location: new google.maps.LatLng(latitude, longitude),\n      radius: 50000,\n      type: 'restaurant',\n      rankBy: google.maps.places.RankBy.PROMINENCE,\n      types: ['restaurant']\n    };\n\n    function fetchMoreReviews(nextPageToken) {\n      return new Promise((resolve, reject) => {\n        const additionalRequest = {\n          nextPageToken: nextPageToken\n        };\n        placesService.getDetails(additionalRequest, (placeDetails, status) => {\n          if (status === google.maps.places.PlacesServiceStatus.OK) {\n            const additionalReviews = placeDetails.reviews || [];\n            const additionalReviewTexts = additionalReviews.map(review => review.text);\n            resolve(additionalReviewTexts);\n          } else {\n            console.error('Error fetching additional reviews:', status);\n            reject();\n          }\n        });\n      });\n    }\n\n    placesService.nearbySearch(request, (results, status, pagination) => {\n      if (status === google.maps.places.PlacesServiceStatus.OK) {\n        const filteredRestaurants = results.filter(restaurant => {\n          return restaurant.rating >= 4.0 && restaurant.user_ratings_total >= 30 &&\n            !restaurant.name.toLowerCase().includes('hotel');\n        });\n\n        const promises = filteredRestaurants.map(restaurant => {\n          return new Promise((resolve, reject) => {\n            const detailsRequest = {\n              placeId: restaurant.place_id,\n              fields: ['name', 'types', 'reviews']\n            };\n            placesService.getDetails(detailsRequest, (placeDetails, status) => {\n              if (status === google.maps.places.PlacesServiceStatus.OK) {\n                const topReview = placeDetails.reviews && placeDetails.reviews.length > 0 ? placeDetails.reviews[0] : 'null';\n                resolve({ ...restaurant, topReview });\n              } else {\n                console.error('Error fetching restaurant details:', status);\n                reject(status);\n              }\n            });\n          });\n        });\n\n        const reviewPromises = filteredRestaurants.map(restaurant => {\n          return new Promise((resolve, reject) => {\n            const detailsRequest = {\n              placeId: restaurant.place_id,\n              fields: ['reviews']\n            };\n            placesService.getDetails(detailsRequest, (placeDetails, status) => {\n              if (status === google.maps.places.PlacesServiceStatus.OK) {\n                const reviews = placeDetails.reviews || [];\n                const reviewTexts = reviews.map(review => review.text);\n                if (placeDetails.next_page_token) {\n                  fetchMoreReviews(placeDetails.next_page_token)\n                    .then(additionalReviews => {\n                      resolve([...reviewTexts, ...additionalReviews]);\n                    })\n                    .catch(error => {\n                      console.error('Error fetching additional reviews:', error);\n                      resolve(reviewTexts);\n                    });\n                } else {\n                  resolve(reviewTexts);\n                }\n                resolve(reviewTexts);\n              } else {\n                console.error('Error fetching reviews for restaurant:', status);\n                reject();\n              }\n            });\n          });\n        });\n\n        Promise.all([...promises, ...reviewPromises])\n          .then(results => {\n            const restaurantsWithReviews = results.slice(0, promises.length);\n            const reviewTextsArray = results.slice(promises.length);\n            this.setState({ bestRestaurants: restaurantsWithReviews });\n            this.setState({ restReady: true })\n            const mostRepeatedNouns = [];\n            reviewTextsArray.forEach((reviewTexts) => {\n              let mostRepeatedNoun;\n              let maxCount = 0;\n              const allReviewsText = [].concat.apply([], reviewTexts);\n              const giantString = allReviewsText.join(' ');\n              const allWords = allReviewsText.flatMap(text => text.toLowerCase().split(/[\\s\\W]+/));\n              const doc = nlp(giantString);\n              const nouns = doc.nouns().out('array');\n\n              const pronounsList = [\"i\", \"you\", \"he\", \"she\", \"it\", \"we\", \"they\", \"me\", \"him\", \"her\", \"us\", \"them\", \"my\", \"your\", \"his\", \"its\", \"our\", \"their\", \"mine\", \"yours\", \"hers\", \"ours\", \"theirs\"];\n              const filteredNouns = nouns.filter(noun => !pronounsList.includes(noun.toLowerCase()));\n\n              const nounCounts = filteredNouns.reduce((acc, noun) => {\n                acc[noun] = (acc[noun] || 0) + 1;\n                return acc;\n              }, {});\n\n              for (const noun in nounCounts) {\n                if (nounCounts[noun] > maxCount) {\n                  mostRepeatedNoun = noun;\n                  maxCount = nounCounts[noun];\n                }\n              }\n              mostRepeatedNouns.push(mostRepeatedNoun);\n            });\n            this.setState({ mostRepeatedNouns: mostRepeatedNouns });\n            console.log('Most repeated nouns:', mostRepeatedNouns);\n          })\n          .catch(error => {\n            console.error('Error fetching restaurant details and reviews:', error);\n          });\n\n        if (pagination && pagination.hasNextPage) {\n          this.setState({ nextPageToken: pagination.nextPageToken });\n        }\n      } else {\n        console.error('Error fetching nearby restaurants:', status);\n      }\n    });\n  };\n\n  renderRestaurantPage() {\n    const { bestRestaurants, currentIndex, restReady, mostRepeatedNouns } = this.state;\n    const restaurant = bestRestaurants[currentIndex];\n\n    if (!restaurant || !restaurant.topReview) {\n      return <div>Loading...</div>;\n    }\n\n    return (\n      <div className={`restaurant-page ${this.state.isSpinning ? 'spin' : ''}`}>\n        <div className=\"restaurant-info\">\n          <h2>{restaurant.name}</h2>\n          <p>{restaurant.vicinity}</p>\n          <p>{restaurant.types.join(', ')}</p>\n          <h3>Top Review:</h3>\n          <p>{restaurant.topReview.text}</p>\n        </div>\n        {restReady && (\n          <div className=\"most-repeated-nouns\" id=\"mostRepeatedNounsContainer\">\n            <h3>Most Repeated Nouns:</h3>\n            <ul id=\"mostRepeatedNouns\">\n              {mostRepeatedNouns.map((noun, index) => (\n                <li key={index}>{noun}</li>\n              ))}\n            </ul>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  handlePrevious = () => {\n    this.setState(prevState => ({\n      currentIndex: (prevState.currentIndex - 1 + prevState.bestRestaurants.length) % prevState.bestRestaurants.length\n    }));\n  };\n\n  handleNext = () => {\n    this.setState(prevState => ({\n      currentIndex: (prevState.currentIndex + 1) % prevState.bestRestaurants.length\n    }));\n  };\n\n  toggleSpinning = () => {\n    this.setState(prevState => ({ isSpinning: !prevState.isSpinning }));\n  };\n\n  render() {\n    const { currentLocation, showFirstPage } = this.state;\n\n    return (\n      <div className=\"app-container\">\n        {showFirstPage ? (\n          <div className=\"first-page\">\n            <h1>Welcome to Nearby Restaurants</h1>\n            <button onClick={() => this.setState({ showFirstPage: false })}>Search Nearby Restaurants</button>\n          </div>\n        ) : (\n          <div className=\"restaurant-page-container\">\n            {currentLocation && (\n              <Map\n                google={this.props.google}\n                zoom={14}\n                initialCenter={currentLocation}\n              />\n            )}\n            {this.renderRestaurantPage()}\n            <div className=\"buttons\">\n              <button onClick={this.handlePrevious}>Previous</button>\n              <button onClick={this.handleNext}>Next</button>\n              <button onClick={this.toggleSpinning}>Toggle Spin</button>\n            </div>\n            <canvas id=\"c\" width=\"200\" height=\"200\"></canvas>\n            <canvas id=\"bg\" style={{ display: 'none' }}></canvas>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default GoogleApiWrapper({\n  apiKey: 'YOUR_GOOGLE_MAPS_API_KEY'\n})(NearbyRestaurants);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}